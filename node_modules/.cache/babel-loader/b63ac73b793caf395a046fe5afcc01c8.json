{"ast":null,"code":"var _jsxFileName = \"/home/vkaps/Documents/Insta_frontend/src/components/ProfilePic.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProfilePic(_ref) {\n  _s();\n\n  let {\n    changeprofile\n  } = _ref;\n  const hiddenFileInput = useRef(null);\n  const [image, setImage] = useState(\"\");\n  const [url, setUrl] = useState(\"\"); // posting image to cloudinary\n\n  const postDetails = () => {\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"insta-clone\");\n    data.append(\"cloud_name\", \"cantacloud2\");\n    fetch(\"https://api.cloudinary.com/v1_1/cantacloud2/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => setUrl(data.url)).catch(err => console.log(err));\n    console.log(url);\n  };\n\n  const postPic = () => {\n    // saving post to mongodb\n    fetch(\"http://localhost:5000/uploadProfilePic\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        pic: url\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      changeprofile();\n      window.location.reload();\n    }).catch(err => console.log(err));\n  };\n\n  const handleClick = () => {\n    hiddenFileInput.current.click();\n  };\n\n  useEffect(() => {\n    if (image) {\n      postDetails();\n    }\n  }, [image]);\n  useEffect(() => {\n    if (url) {\n      postPic();\n    }\n  }, [url]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profilePic darkBg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"changePic centered\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Change Profile Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"upload-btn\",\n          style: {\n            color: \"#1EA1F7\"\n          },\n          onClick: handleClick,\n          children: \"Upload Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: hiddenFileInput,\n          accept: \"image/*\",\n          style: {\n            display: \"none\"\n          },\n          onChange: e => {\n            setImage(e.target.files[0]);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"upload-btn\",\n          onClick: () => {\n            setUrl(null);\n            postPic();\n          },\n          style: {\n            color: \"#ED4956\"\n          },\n          children: [\" \", \"Remove Current Photo\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"15px\"\n          },\n          onClick: changeprofile,\n          children: \"cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfilePic, \"Gg9gOSOOmhyV/ZBsHfTTi77C+EM=\");\n\n_c = ProfilePic;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePic\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ProfilePic","changeprofile","hiddenFileInput","image","setImage","url","setUrl","postDetails","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","postPic","headers","Authorization","localStorage","getItem","JSON","stringify","pic","window","location","reload","handleClick","current","click","borderTop","color","display","e","target","files","background","border","cursor","fontSize"],"sources":["/home/vkaps/Documents/Insta_frontend/src/components/ProfilePic.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nexport default function ProfilePic({ changeprofile }) {\n  const hiddenFileInput = useRef(null);\n  const [image, setImage] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n\n  // posting image to cloudinary\n  const postDetails = () => {\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"insta-clone\");\n    data.append(\"cloud_name\", \"cantacloud2\");\n    fetch(\"https://api.cloudinary.com/v1_1/cantacloud2/image/upload\", {\n      method: \"post\",\n      body: data,\n    })\n      .then((res) => res.json())\n      .then((data) => setUrl(data.url))\n      .catch((err) => console.log(err));\n    console.log(url);\n  };\n\n  const postPic = () => {\n    // saving post to mongodb\n    fetch(\"http://localhost:5000/uploadProfilePic\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({\n        pic: url,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        changeprofile();\n        window.location.reload();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const handleClick = () => {\n    hiddenFileInput.current.click();\n  };\n\n  useEffect(() => {\n    if (image) {\n      postDetails();\n    }\n  }, [image]);\n  useEffect(() => {\n    if (url) {\n      postPic();\n    }\n  }, [url]);\n  return (\n    <div className=\"profilePic darkBg\">\n      <div className=\"changePic centered\">\n        <div>\n          <h2>Change Profile Photo</h2>\n        </div>\n        <div style={{ borderTop: \"1px solid #00000030\" }}>\n          <button\n            className=\"upload-btn\"\n            style={{ color: \"#1EA1F7\" }}\n            onClick={handleClick}\n          >\n            Upload Photo\n          </button>\n          <input\n            type=\"file\"\n            ref={hiddenFileInput}\n            accept=\"image/*\"\n            style={{ display: \"none\" }}\n            onChange={(e) => {\n              setImage(e.target.files[0]);\n            }}\n          />\n        </div>\n        <div style={{ borderTop: \"1px solid #00000030\" }}>\n          <button\n            className=\"upload-btn\"\n            onClick={() => {\n              setUrl(null);\n              postPic();\n            }}\n            style={{ color: \"#ED4956\" }}\n          >\n            {\" \"}\n            Remove Current Photo\n          </button>\n        </div>\n        <div style={{ borderTop: \"1px solid #00000030\" }}>\n          <button\n            style={{\n              background: \"none\",\n              border: \"none\",\n              cursor: \"pointer\",\n              fontSize: \"15px\",\n            }}\n            onClick={changeprofile}\n          >\n            cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}